{"data":{"timer":[],"css":".page-content{\n  padding:40px;\n  width:300px;\n}\n\n.mdl-button--accent.mdl-button--accent.mdl-button--raised{\n  color:white;\n}\n\n.backbutton{\n  position:fixed;\n  top:16px;\n  left:5px;\n  z-index:100;\n}\n\n.xpage-content{\n  color:rgba(0, 0, 0, 0.87);\n  display:block;\n  font-family:Helvetica, Arial, sans-serif;\n  font-size:14px;\n  font-weight:400;\n  height:332px;\n  line-height:20px;\n  padding-bottom:40px;\n  padding-left:40px;\n  padding-right:40px;\n  padding-top:40px;\n  width:300px;\n}\n\n.xmdl-layout__content{\n  color:rgba(0, 0, 0, 0.87);\n  display:block;\n  flex-grow:1;\n  font-family:Helvetica, Arial, sans-serif;\n  font-size:14px;\n  font-weight:400;\n  height:278px;\n  line-height:20px;\n  margin-left:240px;\n  overflow-x:hidden;\n  overflow-y:auto;\n  position:relative;\n  z-index:1;\n}\n\n.xmdl-navigation__link:hover{\n  background-color:#0001;\n}\n\n.xmdl-navigation__link{\n  color:rgb(117, 117, 117);\n  cursor:pointer;\n  display:block;\n  flex-shrink:0;\n  font-family:Helvetica, Arial, sans-serif;\n  font-size:14px;\n  font-weight:400;\n  height:24px;\n  letter-spacing:normal;\n  line-height:24px;\n  margin-bottom:0px;\n  margin-left:0px;\n  margin-right:0px;\n  margin-top:0px;\n  opacity:0.87;\n  padding-bottom:16px;\n  padding-left:40px;\n  padding-right:40px;\n  padding-top:16px;\n  text-decoration-color:rgb(117, 117, 117);\n  text-decoration-line:none;\n  text-decoration-style:solid;\n  width:159px;\n  -webkit-tap-highlight-color:rgba(255, 255, 255, 0);\n}\n\n.xmdl-navigation dbotlist{\n  align-items:stretch;\n  box-sizing:border-box;\n  color:rgb(66, 66, 66);\n  display:flex;\n  flex-direction:column;\n  flex-shrink:0;\n  flex-wrap:nowrap;\n  font-family:Helvetica, Arial, sans-serif;\n  font-size:14px;\n  font-weight:400;\n  height:128px;\n  line-height:20px;\n  padding-top:16px;\n  width:239px;\n}\n\n.xmdl-layout-title{\n  box-sizing:border-box;\n  color:rgb(66, 66, 66);\n  display:block;\n  flex-shrink:0;\n  font-family:Roboto, Helvetica, Arial, sans-serif;\n  font-size:20px;\n  font-weight:400;\n  height:64px;\n  letter-spacing:0.4px;\n  line-height:64px;\n  padding-left:40px;\n  position:relative;\n  width:239px;\n}\n\n.xmdl-layout__drawer{\n  background-attachment:scroll;\n  background-clip:border-box;\n  background-color:rgb(250, 250, 250);\n  background-image:none;\n  background-origin:padding-box;\n  background-position-x:0%;\n  background-position-y:0%;\n  background-repeat-x:;\n  background-repeat-y:;\n  background-size:auto;\n  border-right-color:rgb(224, 224, 224);\n  border-right-style:solid;\n  border-right-width:1px;\n  box-shadow:rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\n  box-sizing:border-box;\n  color:rgb(66, 66, 66);\n  display:flex;\n  flex-direction:column;\n  flex-wrap:nowrap;\n  font-family:Helvetica, Arial, sans-serif;\n  font-size:14px;\n  font-weight:400;\n  height:100%;\n  left:0px;\n  line-height:20px;\n  max-height:100%;\n  overflow-x:auto;\n  overflow-y:auto;\n  position:absolute;\n  top:0px;\n  transform:matrix(1, 0, 0, 1, 0, 0);\n  transform-style:preserve-3d;\n  transition-duration:0.2s;\n  transition-property:transform, -webkit-transform;\n  transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);\n  width:240px;\n  will-change:transform;\n  z-index:5;\n}","data":[],"name":"discord","js":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nme.ready = function(){\n  componentHandler.upgradeAllRegistered();\n  json('../botmanager/read', 'db=runtime&id=discordbots', function(result){\n    me.bots = result.status == 'ok' ? result.data : {};\n    build();\n  });\n};\n\n$(document).click(function(event) {\n   window.lastElementClicked = event.target;\n});\n\n$(ME).find('.adddbotbut').click(function(){\n  var bot = {};\n  bot.cb = me.save;\n  installControl($(ME).find('.xpage-content')[0], 'discord', 'bot', function(){}, bot);\n});\n\nme.delete = function(id){\n  delete me.bots[id];\n  build();\n  json('../discord/stopbot', 'id='+id, function(result){});\n};\n\nme.save = function(bot){\n  if (bot) me.bots[bot.id] = bot;\n  json('../botmanager/newdb', 'db=runtime', function(result){\n    json('../botmanager/write', 'db=runtime&id=discordbots&data='+encodeURIComponent(JSON.stringify(me.bots)), function(result){\n      build();\n      if (bot) {\n        json('../discord/startbot', 'id='+bot.id, function(result){});\n      }\n    });\n  });\n};\n\nfunction build(){\n  $(ME).find('.botlink').remove();\n  var newhtml = '';\n  for (var i in me.bots){\n    var bot = me.bots[i];\n    newhtml += '<a class=\"xmdl-navigation__link botlink\" href=\"#\" data-id=\"'+bot.id+'\">'+bot.name+'<\/a>';\n  }\n  $(ME).find('.dbotlist').prepend(newhtml);\n  $(ME).find('.botlink').click(function(){\n    var bot = me.bots[$(this).data('id')];\n    bot.cb = me.save;\n    installControl($(ME).find('.xpage-content')[0], 'discord', 'bot', function(){}, bot);\n  });\n}","groups":"","ctl":"pvkwmz164b3008ad5p26b3","html":"<div class=\"mdl-layout mdl-js-layout mdl-layout--fixed-drawer\">\n  <div class=\"xmdl-layout__drawer\">\n    <span class=\"xmdl-layout-title\">Discord Bots<\/span>\n    <nav class=\"xmdl-navigation dbotlist\">\n      <center>\n        <button class=\"mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored adddbotbut\">\n          <i class=\"material-icons\">add<\/i>\n        <\/button>\n      <\/center>\n    <\/nav>\n  <\/div>\n  <main class=\"xmdl-layout__content\">\n    <div class=\"xpage-content\"><\/div>\n  <\/main>\n<\/div>\n <a href=\"../\" class=\"mdl-button mdl-js-button mdl-button--icon mdl-button--colored backbutton\"><i class=\"material-icons\">chevron_left<\/i><\/a>\n","cmd":[{"java":"iqhqiy164b905dae3t2f","name":"startbot","id":"nziruu164b905dae8x30"},{"java":"xisoxg16552a8bd16l22","name":"stopbot","id":"vhnozv16552a8bd1ag23"}],"db":"discord","desc":""},"id":"pvkwmz164b3008ad5p26b3","sessionid":"jhtpuq15d03ce0a74q0","time":1534690273728,"addr":"/0:0:0:0:0:0:0:1:60104","username":"mraiser"}